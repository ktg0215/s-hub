(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{41558:function(e,t,r){Promise.resolve().then(r.bind(r,65277))},65277:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Z}});var a=r(57437),s=r(2265),n=r(71811),l=r(95805),o=r(95252),i=r(86595),c=r(53417),d=r(66070);function u(e){let{totalUsers:t,monthlyRevenue:r,avgRating:s,totalReviews:n,userChange:u,revenueChange:x,ratingChange:f,reviewChange:h}=e,m=[{title:"総ユーザー",value:t.toLocaleString(),change:"".concat(u>=0?"+":"").concat(u.toFixed(1),"%"),changePositive:u>=0,icon:l.Z},{title:"今月売上",value:"$".concat(r.toFixed(2)),change:"".concat(x>=0?"+":"","$").concat(x.toFixed(2)),changePositive:x>=0,icon:o.Z},{title:"平均評価",value:s.toFixed(2),change:"".concat(f>=0?"+":"").concat(f.toFixed(2)),changePositive:f>=0,icon:i.Z},{title:"総レビュー",value:n.toLocaleString(),change:"".concat(h>=0?"+":"").concat(h),changePositive:h>=0,icon:c.Z}];return(0,a.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:m.map(e=>(0,a.jsxs)(d.Zb,{children:[(0,a.jsxs)(d.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(d.ll,{className:"text-sm font-medium",children:e.title}),(0,a.jsx)(e.icon,{className:"h-4 w-4 text-muted-foreground"})]}),(0,a.jsxs)(d.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:e.value}),(0,a.jsx)("p",{className:"text-xs ".concat(e.changePositive?"text-green-600":"text-red-600"),children:e.change})]})]},e.title))})}var x=r(47625),f=r(58336),h=r(56940),m=r(97059),g=r(62994),b=r(8147),v=r(22190),j=r(54061);let p=["#2563eb","#16a34a","#dc2626","#9333ea","#ea580c","#0891b2","#4f46e5","#db2777"];function N(e){let{data:t,title:r="ユーザー数推移"}=e,s=t.length>0?Object.keys(t[0]).filter(e=>"date"!==e&&"users"!==e):[],n=t.map(e=>({...e,date:new Date(e.date).toLocaleDateString("ja-JP",{month:"short",day:"numeric"})}));return(0,a.jsxs)(d.Zb,{children:[(0,a.jsx)(d.Ol,{children:(0,a.jsx)(d.ll,{className:"text-lg",children:r})}),(0,a.jsx)(d.aY,{children:(0,a.jsx)("div",{className:"h-[300px]",children:(0,a.jsx)(x.h,{width:"100%",height:"100%",children:(0,a.jsxs)(f.w,{data:n,margin:{top:5,right:30,left:20,bottom:5},children:[(0,a.jsx)(h.q,{strokeDasharray:"3 3",className:"stroke-muted"}),(0,a.jsx)(m.K,{dataKey:"date",className:"text-xs",tick:{fill:"hsl(var(--muted-foreground))"}}),(0,a.jsx)(g.B,{className:"text-xs",tick:{fill:"hsl(var(--muted-foreground))"}}),(0,a.jsx)(b.u,{contentStyle:{backgroundColor:"hsl(var(--card))",border:"1px solid hsl(var(--border))",borderRadius:"8px"}}),(0,a.jsx)(v.D,{}),(0,a.jsx)(j.x,{type:"monotone",dataKey:"users",stroke:"#2563eb",strokeWidth:2,dot:!1,name:"総ユーザー数"}),s.slice(0,8).map((e,t)=>(0,a.jsx)(j.x,{type:"monotone",dataKey:e,stroke:p[t%p.length],strokeWidth:1,dot:!1,strokeDasharray:"5 5"},e))]})})})})]})}var y=r(27648),w=r(96362),k=r(10407),C=r(73578),R=r(35974);function S(e){let{extensions:t}=e;return(0,a.jsxs)(d.Zb,{children:[(0,a.jsx)(d.Ol,{children:(0,a.jsx)(d.ll,{className:"text-lg",children:"拡張機能一覧"})}),(0,a.jsx)(d.aY,{children:(0,a.jsxs)(C.iA,{children:[(0,a.jsx)(C.xD,{children:(0,a.jsxs)(C.SC,{children:[(0,a.jsx)(C.ss,{children:"名前"}),(0,a.jsx)(C.ss,{className:"text-right",children:"ユーザー"}),(0,a.jsx)(C.ss,{className:"text-right",children:"評価"}),(0,a.jsx)(C.ss,{className:"text-right",children:"レビュー"}),(0,a.jsx)(C.ss,{className:"text-right",children:"週間増減"}),(0,a.jsx)(C.ss,{className:"w-[50px]"})]})}),(0,a.jsx)(C.RM,{children:t.map(e=>(0,a.jsxs)(C.SC,{className:"hover:bg-muted/50 cursor-pointer",children:[(0,a.jsx)(C.pj,{className:"font-medium",children:(0,a.jsx)(y.default,{href:"/extensions/".concat(e.id),className:"hover:text-primary transition-colors",children:e.name})}),(0,a.jsx)(C.pj,{className:"text-right",children:e.users.toLocaleString()}),(0,a.jsx)(C.pj,{className:"text-right",children:(0,a.jsx)(R.C,{variant:"outline",children:e.rating.toFixed(1)})}),(0,a.jsx)(C.pj,{className:"text-right",children:e.reviewCount}),(0,a.jsx)(C.pj,{className:"text-right",children:(0,a.jsxs)("span",{className:e.weeklyInstalls>=0?"text-green-600":"text-red-600",children:[e.weeklyInstalls>=0?"+":"",e.weeklyInstalls]})}),(0,a.jsx)(C.pj,{children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("a",{href:"https://chromewebstore.google.com/detail/".concat(e.chrome_store_id),target:"_blank",rel:"noopener noreferrer",className:"text-muted-foreground hover:text-foreground",onClick:e=>e.stopPropagation(),children:(0,a.jsx)(w.Z,{className:"h-4 w-4"})}),(0,a.jsx)(y.default,{href:"/extensions/".concat(e.id),className:"text-muted-foreground hover:text-foreground",children:(0,a.jsx)(k.Z,{className:"h-4 w-4"})})]})})]},e.id))})]})})]})}function Z(){let[e,t]=(0,s.useState)(null),[l,o]=(0,s.useState)([]),[i,c]=(0,s.useState)([]),[d,x]=(0,s.useState)(!0),[f,h]=(0,s.useState)(!1),[m,g]=(0,s.useState)(!1),[b,v]=(0,s.useState)(null),j=(0,s.useCallback)(async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{let{mockDashboardSummary:a,generateMockChartData:s,mockExtensionStats:n}=await r.e(694).then(r.bind(r,33694));if(e)try{let e={};e.Authorization="Bearer ".concat("test-token");let r=await fetch("/dashboard/api/live-stats",{headers:e}),a=await r.json();if(a.success){let{summary:e,extensions:r}=a.data;t({totalUsers:e.totalUsers,monthlyRevenue:0,avgRating:e.avgRating,totalReviews:e.totalReviews,userChange:0,revenueChange:0,ratingChange:0,reviewChange:0}),c(r),o([]),v(e.scrapedAt);return}}catch(e){console.log("Live fetch failed, using mock data")}t(a),o(s(30)),c(n),v(null)}catch(e){console.error("Error fetching dashboard data:",e)}finally{x(!1),h(!1)}},[]);(0,s.useEffect)(()=>{j(m)},[j,m]);let p=async()=>{h(!0),await j(m)},y=async()=>{let e=!m;g(e),x(!0),await j(e)};if(d)return(0,a.jsx)(n.Z,{children:(0,a.jsxs)("div",{className:"flex h-[calc(100vh-10rem)] flex-col items-center justify-center gap-4",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"}),(0,a.jsx)("div",{className:"text-muted-foreground",children:m?"Chrome Web Storeからデータを取得中...（約20秒）":"読み込み中..."})]})});let w=e||{totalUsers:0,monthlyRevenue:0,avgRating:0,totalReviews:0,userChange:0,revenueChange:0,ratingChange:0,reviewChange:0};return(0,a.jsx)(n.Z,{onRefresh:p,isRefreshing:f,children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("button",{onClick:y,className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors ".concat(m?"bg-green-600 text-white":"bg-secondary text-secondary-foreground hover:bg-secondary/80"),children:m?"ライブモード (実データ)":"モックモード (テストデータ)"}),b&&(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:["最終取得: ",new Date(b).toLocaleString("ja-JP")]})]}),m&&(0,a.jsx)("span",{className:"text-xs text-amber-600 bg-amber-50 px-2 py-1 rounded",children:"Chrome Web Storeから直接取得中（約20秒かかります）"})]}),(0,a.jsx)(u,{totalUsers:w.totalUsers,monthlyRevenue:w.monthlyRevenue,avgRating:w.avgRating,totalReviews:w.totalReviews,userChange:w.userChange,revenueChange:w.revenueChange,ratingChange:w.ratingChange,reviewChange:w.reviewChange}),(0,a.jsx)(N,{data:l,title:"ユーザー数推移（30日間）"}),(0,a.jsx)(S,{extensions:i})]})})}},71811:function(e,t,r){"use strict";r.d(t,{Z:function(){return v}});var a=r(57437),s=r(82431),n=r(98728),l=r(62869);function o(e){let{onRefresh:t,isRefreshing:r}=e;return(0,a.jsx)("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,a.jsxs)("div",{className:"flex h-14 items-center px-6",children:[(0,a.jsx)("div",{className:"flex flex-1 items-center",children:(0,a.jsx)("h1",{className:"text-xl font-bold",children:"S-Hub Dashboard"})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[t&&(0,a.jsxs)(l.z,{variant:"outline",size:"sm",onClick:t,disabled:r,children:[(0,a.jsx)(s.Z,{className:"h-4 w-4 mr-2 ".concat(r?"animate-spin":"")}),"今すぐ更新"]}),(0,a.jsx)(l.z,{variant:"ghost",size:"icon",children:(0,a.jsx)(n.Z,{className:"h-4 w-4"})})]})]})})}var i=r(27648),c=r(99376),d=r(25466),u=r(11239),x=r(44794),f=r(73247),h=r(10407),m=r(94508);let g=[{name:"ダッシュボード",href:"/",icon:d.Z},{name:"自動化",href:"/workflows",icon:u.Z},{name:"リリース履歴",href:"/releases",icon:x.Z},{name:"Search Console",href:"/search-console",icon:f.Z}];function b(){let e=(0,c.usePathname)();return(0,a.jsx)("aside",{className:"fixed left-0 top-14 z-40 h-[calc(100vh-3.5rem)] w-64 border-r bg-background",children:(0,a.jsx)("nav",{className:"flex flex-col gap-1 p-4",children:g.map(t=>{let r=e===t.href;return(0,a.jsxs)(i.default,{href:t.href,className:(0,m.cn)("flex items-center gap-3 rounded-lg px-3 py-2 text-sm transition-colors",r?"bg-secondary text-secondary-foreground":"text-muted-foreground hover:bg-secondary/50 hover:text-secondary-foreground"),children:[(0,a.jsx)(t.icon,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"flex-1",children:t.name}),r&&(0,a.jsx)(h.Z,{className:"h-4 w-4"})]},t.name)})})})}function v(e){let{children:t,onRefresh:r,isRefreshing:s}=e;return(0,a.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,a.jsx)(o,{onRefresh:r,isRefreshing:s}),(0,a.jsx)(b,{}),(0,a.jsx)("main",{className:"ml-64 min-h-[calc(100vh-3.5rem)] p-6",children:t})]})}},35974:function(e,t,r){"use strict";r.d(t,{C:function(){return o}});var a=r(57437);r(2265);var s=r(90535),n=r(94508);let l=(0,s.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100",warning:"border-transparent bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-100"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:r,...s}=e;return(0,a.jsx)("div",{className:(0,n.cn)(l({variant:r}),t),...s})}},62869:function(e,t,r){"use strict";r.d(t,{z:function(){return c}});var a=r(57437),s=r(2265),n=r(85293),l=r(90535),o=r(94508);let i=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=s.forwardRef((e,t)=>{let{className:r,variant:s,size:l,asChild:c=!1,...d}=e,u=c?n.g7:"button";return(0,a.jsx)(u,{className:(0,o.cn)(i({variant:s,size:l,className:r})),ref:t,...d})});c.displayName="Button"},66070:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return c},Zb:function(){return l},aY:function(){return d},ll:function(){return i}});var a=r(57437),s=r(2265),n=r(94508);let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});l.displayName="Card";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...s})});o.displayName="CardHeader";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});i.displayName="CardTitle";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})});c.displayName="CardDescription";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...s})});d.displayName="CardContent",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...s})}).displayName="CardFooter"},73578:function(e,t,r){"use strict";r.d(t,{RM:function(){return i},SC:function(){return c},iA:function(){return l},pj:function(){return u},ss:function(){return d},xD:function(){return o}});var a=r(57437),s=r(2265),n=r(94508);let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,n.cn)("w-full caption-bottom text-sm",r),...s})})});l.displayName="Table";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("thead",{ref:t,className:(0,n.cn)("[&_tr]:border-b",r),...s})});o.displayName="TableHeader";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,n.cn)("[&_tr:last-child]:border-0",r),...s})});i.displayName="TableBody",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...s})}).displayName="TableFooter";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tr",{ref:t,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...s})});c.displayName="TableRow";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("th",{ref:t,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...s})});d.displayName="TableHead";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("td",{ref:t,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...s})});u.displayName="TableCell",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("caption",{ref:t,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",r),...s})}).displayName="TableCaption"},94508:function(e,t,r){"use strict";r.d(t,{cn:function(){return n}});var a=r(61994),s=r(53335);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m6)((0,a.W)(t))}}},function(e){e.O(0,[794,720,971,117,744],function(){return e(e.s=41558)}),_N_E=e.O()}]);