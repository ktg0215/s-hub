(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[467],{56148:function(e,r,t){Promise.resolve().then(t.bind(t,35330))},35330:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return v}});var s=t(57437),a=t(2265),n=t(71811),i=t(68755);let c=(0,i.Z)("megaphone",[["path",{d:"M11 6a13 13 0 0 0 8.4-2.8A1 1 0 0 1 21 4v12a1 1 0 0 1-1.6.8A13 13 0 0 0 11 14H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2z",key:"q8bfy3"}],["path",{d:"M6 14a12 12 0 0 0 2.4 7.2 2 2 0 0 0 3.2-2.4A8 8 0 0 1 10 14",key:"1853fq"}],["path",{d:"M8 6v8",key:"15ugcq"}]]);var l=t(82431),d=t(73247);let o=(0,i.Z)("git-branch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]),u=(0,i.Z)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]);var f=t(62869),m=t(66070),x=t(35974);let h={marketing:c,data:l.Z,analytics:d.Z,release:o};function g(e){var r;let{workflow:t,onTrigger:n}=e,[i,c]=(0,a.useState)(!1),d=async()=>{c(!0);try{await n(t.id)}finally{c(!1)}},o=h[t.category||"data"]||l.Z;return(0,s.jsxs)(m.Zb,{children:[(0,s.jsxs)(m.Ol,{className:"flex flex-row items-start justify-between space-y-0",children:[(0,s.jsxs)("div",{className:"flex items-start gap-3",children:[(0,s.jsx)("div",{className:"mt-1 rounded-md bg-muted p-2",children:(0,s.jsx)(o,{className:"h-4 w-4"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)(m.ll,{className:"text-base",children:t.name}),(0,s.jsx)(m.SZ,{className:"mt-1",children:t.description})]})]}),(0,s.jsxs)(f.z,{size:"sm",onClick:d,disabled:i,children:[i?(0,s.jsx)(l.Z,{className:"h-4 w-4 mr-2 animate-spin"}):(0,s.jsx)(u,{className:"h-4 w-4 mr-2"}),"実行"]})]}),(0,s.jsx)(m.aY,{children:(0,s.jsxs)("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:["最終実行: ",(r=t.last_triggered_at)?new Date(r).toLocaleString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"未実行"]}),t.lastStatus&&(0,s.jsx)(x.C,{variant:"success"===t.lastStatus?"success":"destructive",children:"success"===t.lastStatus?"成功":"失敗"}),!t.webhook_url&&(0,s.jsx)(x.C,{variant:"outline",children:"モック"})]})})]})}let p=(0,i.Z)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),j=(0,i.Z)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),y=(0,i.Z)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);function b(e){let{logs:r,workflows:t}=e,a=e=>{let r=t.find(r=>r.id===e);return(null==r?void 0:r.name)||"Unknown"},n=e=>new Date(e).toLocaleString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),i=e=>{let{status:r}=e;switch(r){case"success":return(0,s.jsx)(p,{className:"h-4 w-4 text-green-600"});case"failed":return(0,s.jsx)(j,{className:"h-4 w-4 text-red-600"});default:return(0,s.jsx)(y,{className:"h-4 w-4 text-yellow-600"})}};return 0===r.length?(0,s.jsxs)(m.Zb,{children:[(0,s.jsx)(m.Ol,{children:(0,s.jsx)(m.ll,{className:"text-base",children:"実行ログ"})}),(0,s.jsx)(m.aY,{children:(0,s.jsx)("p",{className:"text-sm text-muted-foreground",children:"まだ実行ログがありません"})})]}):(0,s.jsxs)(m.Zb,{children:[(0,s.jsx)(m.Ol,{children:(0,s.jsx)(m.ll,{className:"text-base",children:"実行ログ"})}),(0,s.jsx)(m.aY,{children:(0,s.jsx)("div",{className:"space-y-2",children:r.map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-3 rounded-lg border p-3",children:[(0,s.jsx)(i,{status:e.status}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("div",{className:"text-sm font-medium",children:a(e.workflow_id)}),(0,s.jsx)("div",{className:"text-xs text-muted-foreground",children:n(e.triggered_at)})]}),(0,s.jsxs)("div",{className:"text-sm text-muted-foreground",children:["success"===e.status&&"成功","failed"===e.status&&"失敗","pending"===e.status&&"実行中"]})]},e.id))})})]})}function v(){let[e,r]=(0,a.useState)([]),[t,i]=(0,a.useState)([]),[c,l]=(0,a.useState)(!0),d=(0,a.useCallback)(async()=>{try{let e=await fetch("/api/workflows"),t=await e.json();t.success&&r(t.data||[])}catch(e){console.error("Error fetching workflows:",e)}finally{l(!1)}},[]);(0,a.useEffect)(()=>{d()},[d]);let o=async e=>{try{let r=await fetch("/api/workflows/".concat(e,"/trigger"),{method:"POST"}),t=await r.json();return t.success&&d(),t}catch(e){return console.error("Error triggering workflow:",e),{success:!1,error:"Failed to trigger workflow"}}};if(c)return(0,s.jsx)(n.Z,{children:(0,s.jsx)("div",{className:"flex h-[calc(100vh-10rem)] items-center justify-center",children:(0,s.jsx)("div",{className:"text-muted-foreground",children:"読み込み中..."})})});let u=e.filter(e=>"marketing"===e.category),f=e.filter(e=>"data"===e.category),m=e.filter(e=>"analytics"===e.category);return(0,s.jsx)(n.Z,{children:(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-2xl font-bold tracking-tight",children:"自動化ワークフロー"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"n8nワークフローを手動でトリガーできます"})]}),u.length>0&&(0,s.jsxs)("section",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"マーケティング"}),(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-2",children:u.map(e=>(0,s.jsx)(g,{workflow:e,onTrigger:o},e.id))})]}),f.length>0&&(0,s.jsxs)("section",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"データ収集"}),(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-2",children:f.map(e=>(0,s.jsx)(g,{workflow:e,onTrigger:o},e.id))})]}),m.length>0&&(0,s.jsxs)("section",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"分析"}),(0,s.jsx)("div",{className:"grid gap-4 md:grid-cols-2",children:m.map(e=>(0,s.jsx)(g,{workflow:e,onTrigger:o},e.id))})]}),(0,s.jsxs)("section",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"実行ログ"}),(0,s.jsx)(b,{logs:t,workflows:e})]})]})})}},71811:function(e,r,t){"use strict";t.d(r,{Z:function(){return j}});var s=t(57437),a=t(82431),n=t(98728),i=t(62869);function c(e){let{onRefresh:r,isRefreshing:t}=e;return(0,s.jsx)("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:(0,s.jsxs)("div",{className:"flex h-14 items-center px-6",children:[(0,s.jsx)("div",{className:"flex flex-1 items-center",children:(0,s.jsx)("h1",{className:"text-xl font-bold",children:"S-Hub Dashboard"})}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[r&&(0,s.jsxs)(i.z,{variant:"outline",size:"sm",onClick:r,disabled:t,children:[(0,s.jsx)(a.Z,{className:"h-4 w-4 mr-2 ".concat(t?"animate-spin":"")}),"今すぐ更新"]}),(0,s.jsx)(i.z,{variant:"ghost",size:"icon",children:(0,s.jsx)(n.Z,{className:"h-4 w-4"})})]})]})})}var l=t(27648),d=t(99376),o=t(25466),u=t(11239),f=t(44794),m=t(73247),x=t(10407),h=t(94508);let g=[{name:"ダッシュボード",href:"/",icon:o.Z},{name:"自動化",href:"/workflows",icon:u.Z},{name:"リリース履歴",href:"/releases",icon:f.Z},{name:"Search Console",href:"/search-console",icon:m.Z}];function p(){let e=(0,d.usePathname)();return(0,s.jsx)("aside",{className:"fixed left-0 top-14 z-40 h-[calc(100vh-3.5rem)] w-64 border-r bg-background",children:(0,s.jsx)("nav",{className:"flex flex-col gap-1 p-4",children:g.map(r=>{let t=e===r.href;return(0,s.jsxs)(l.default,{href:r.href,className:(0,h.cn)("flex items-center gap-3 rounded-lg px-3 py-2 text-sm transition-colors",t?"bg-secondary text-secondary-foreground":"text-muted-foreground hover:bg-secondary/50 hover:text-secondary-foreground"),children:[(0,s.jsx)(r.icon,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"flex-1",children:r.name}),t&&(0,s.jsx)(x.Z,{className:"h-4 w-4"})]},r.name)})})})}function j(e){let{children:r,onRefresh:t,isRefreshing:a}=e;return(0,s.jsxs)("div",{className:"min-h-screen bg-background",children:[(0,s.jsx)(c,{onRefresh:t,isRefreshing:a}),(0,s.jsx)(p,{}),(0,s.jsx)("main",{className:"ml-64 min-h-[calc(100vh-3.5rem)] p-6",children:r})]})}},35974:function(e,r,t){"use strict";t.d(r,{C:function(){return c}});var s=t(57437);t(2265);var a=t(90535),n=t(94508);let i=(0,a.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground",success:"border-transparent bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100",warning:"border-transparent bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-100"}},defaultVariants:{variant:"default"}});function c(e){let{className:r,variant:t,...a}=e;return(0,s.jsx)("div",{className:(0,n.cn)(i({variant:t}),r),...a})}},62869:function(e,r,t){"use strict";t.d(r,{z:function(){return d}});var s=t(57437),a=t(2265),n=t(85293),i=t(90535),c=t(94508);let l=(0,i.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=a.forwardRef((e,r)=>{let{className:t,variant:a,size:i,asChild:d=!1,...o}=e,u=d?n.g7:"button";return(0,s.jsx)(u,{className:(0,c.cn)(l({variant:a,size:i,className:t})),ref:r,...o})});d.displayName="Button"},66070:function(e,r,t){"use strict";t.d(r,{Ol:function(){return c},SZ:function(){return d},Zb:function(){return i},aY:function(){return o},ll:function(){return l}});var s=t(57437),a=t(2265),n=t(94508);let i=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...a})});i.displayName="Card";let c=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",t),...a})});c.displayName="CardHeader";let l=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("h3",{ref:r,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",t),...a})});l.displayName="CardTitle";let d=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("p",{ref:r,className:(0,n.cn)("text-sm text-muted-foreground",t),...a})});d.displayName="CardDescription";let o=a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,n.cn)("p-6 pt-0",t),...a})});o.displayName="CardContent",a.forwardRef((e,r)=>{let{className:t,...a}=e;return(0,s.jsx)("div",{ref:r,className:(0,n.cn)("flex items-center p-6 pt-0",t),...a})}).displayName="CardFooter"},94508:function(e,r,t){"use strict";t.d(r,{cn:function(){return n}});var s=t(61994),a=t(53335);function n(){for(var e=arguments.length,r=Array(e),t=0;t<e;t++)r[t]=arguments[t];return(0,a.m6)((0,s.W)(r))}}},function(e){e.O(0,[794,971,117,744],function(){return e(e.s=56148)}),_N_E=e.O()}]);